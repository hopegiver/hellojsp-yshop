
<input type="text" name="cats" id="cats" class="form-control" data-toggle="modal" data-target="#exampleModal" readonly >
<input type="hidden" name="cat_ids" id="cat_ids" class="form-control" >
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table id="simple-table" class="table table-bordered table-bordered-x table-hover text-dark-m2">
    <tbody>
    #foreach($item in $list)
    <tr class="bgc-h-default-l3 ">
        <td>
            <label><input type="checkbox" name="category" onclick="getcat();" id="${item.category_name}" value="${item.id}" #foreach($cat in $cats) #if($cat.id == $item.id) checked  #end #end > ${item.category_name} </label>
        </td>

    </tr>
    #foreach($subitem in $sublist)
    #if($subitem.parent_id == $item.id)
    <tr class="bgc-h-default-l3 ">
        <td style="padding-left: 40px;">
            <label><input type="checkbox" name="category" onclick="getcat();" id="${subitem.category_name}" value="${subitem.id}" #foreach($cat in $cats) #if($cat.id == $subitem.id) checked  #end #end> ${subitem.category_name}</label>
        </td>

    </tr>
    #end
    #end
    #end
    </tbody>


</table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" >Save changes</button>
            </div>
        </div>
    </div>
</div>
<script>

    function getcat(sel)
    {

        var cats = [];
        var cat_ids = [];
        $('input[name=category]:checked').map(function() {
            cats.push($(this).attr('id'));
            cat_ids.push($(this).val());
        });


        $('#cats').val(cats);
        $('#cat_ids').val(cat_ids);


    }
</script>
